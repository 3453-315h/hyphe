    <div class="container-fluid">
      <div class="row no-gutter" ng-include="'partials/sub/topbar.html'">
      </div>
      <div class="row no-gutter">
        <div class="col-lg-2 col-md-3 col-sm-4" ng-include="'partials/sub/sidebar.html'">
        </div>
        <div class="col-lg-10 col-md-9 col-sm-8">
          <div class="container-fluid main">
            <div class="row">
              <div class="col-md-12">
                <h1>
                  LIST WEB ENTITIES
                </h1>
              </div>
            </div>

            <div ng-if="!loaded">
              <spinner text="'LOADING'"/>
            </div>
            
            <div ng-if="loaded">
              <div class="panel panel-default webentities-list-table">
                
                <!-- Default panel contents -->
                <div class="panel-heading">

                  <div class="input-group">
                    <input
                      type="text"
                      class="form-control"
                      placeholder="Type a query"
                      ng-model="$parent.query"
                      ng-press-enter="doQuery()"
                    >
                    <span class="input-group-btn">
                      <button
                        class="btn btn-default"
                        type="button"
                        ng-click="doQuery()"
                      >Search</button>
                    </span>
                  </div>

                  <form class="form-inline" role="form">
                    
                    <div class="form-group" ng-if="lastQuery && lastQuery != ''">
                      <button type="button" class="btn btn-primary" ng-click="clearQuery()"><span class="glyphicon glyphicon-remove"></span> {{lastQuery}}</button>
                    </div>

                    <div class="btn-group">
                      <label
                        class="btn btn-default"
                        ng-model="statuses.in"
                        ng-change="doQuery()"
                        ng-class="{disabled:loading}"
                        btn-checkbox
                      >IN</label>

                      <label
                        class="btn btn-default"
                        ng-model="statuses.out"
                        ng-change="doQuery()"
                        ng-class="{disabled:loading}"
                        btn-checkbox
                      >OUT</label>

                      <label
                        class="btn btn-default"
                        ng-model="statuses.undecided"
                        ng-change="doQuery()"
                        ng-class="{disabled:loading}"
                        btn-checkbox
                      >UNDECIDED</label>

                      <label
                        class="btn btn-default"
                        ng-model="statuses.discovered"
                        ng-change="doQuery()"
                        ng-class="{disabled:loading}"
                        btn-checkbox
                      >DISCOVERED</label>

                    </div>

                    <!-- <div class="form-group">
                      <select class="form-control" ng-model="sort">
                        <option value="name">Sort by Name</option>
                        <option value="status">Sort by Status</option>
                        <option value="crawled">Sort by Crawled</option>
                        <option value="date">Sort by Date</option>
                      </select>
                    </div> -->

                </div>

                <table class="table table-condensed">
                  <thead>
                    <tr>
                      <th class="cell-checkbox"></th>
                      <th>{{list.length}} Web Entit{{list.length > 1 ? 'ies' : 'y'}}</th>
                      <th class="cell-status">Status</th>
                      <th class="cell-last-crawled">Crawled</th>
                      <th class="cell-last-modif">Last modif.</th>
                    </tr>
                  </thead>
                  <tbody>

                    <!-- Rows -->
                    <tr
                      class="webentity-row"
                      ng-repeat="obj in list|paginate:$parent.paginationPage:paginationLength track by $index"
                      ng-click="toggleRow(obj.id)"
                      ng-class="{'bg-selected':obj.checked}"
                    >
                      <td class="cell-checkbox" ng-click="toggleRow(obj.id)"><input type="checkbox" ng-model="obj.checked"></td>
                      <td>{{obj.webentity.name}}</td>
                      <td class="cell-status">{{obj.webentity.status}}</td>
                      <td class="cell-last-crawled">
                        <span tooltip="{{obj.webentity.crawling_status}}|{{obj.webentity.indexing_status}}">
                          <span class="text-success" ng-if="obj.webentity.crawling_status == 'FINISHED'">YES</span>
                          <span class="text-danger" ng-if="obj.webentity.crawling_status != 'FINISHED'">NO</span>
                        </span>
                      </td>
                      <td class="cell-last-modif">
                        <span tooltip="{{obj.webentity.last_modification_date|date}}">{{obj.webentity.last_modification_date|prettyDate}}</span>
                      </td>
                    </tr>

                  </tbody>
                </table>

              </div>

              <!-- Easter Egg -->
              <div ng-if="!statuses.in && !statuses.out && !statuses.undecided && !statuses.discovered">
                <h3 class="text-info">You chose to display nothing. Enjoy some user mockery! :&nbsp;)</h3>
                <img ng-if="randomEasterEgg == 0" src="img/egg_linda.gif">
                <img ng-if="randomEasterEgg == 1" src="img/egg_iamretard.gif">
                <img ng-if="randomEasterEgg == 2" src="img/egg_howdevpictureusers.gif">
                <img ng-if="randomEasterEgg == 3" src="img/egg_userandphone.gif">
              </div>


              <!-- Pagination  -->
              <div class="text-center">
                <pagination total-items="list.length" ng-model="$parent.$parent.paginationPage" items-per-page="paginationLength" boundary-links="true" rotate="false" max-size="paginationNumPages" ng-if="list.length > paginationLength"></pagination>
              </div>

              <!-- Checked Actions -->
              <div ng-if="checkedList.length > 0" class="webentities-list-actions">
                <div class="panel panel-primary">
                  <div class="panel-heading">
                    Selection: <strong>{{checkedList.length}} {{checkedList.length > 1 ? 'web entities' : 'web entity'}}</strong>
                  </div>
                  <div class="panel-body">
                    <div class="container-fluid">
                      <div class="row">
                        
                        <!-- List preview -->
                        <div class="col-lg-5 col-sm-6">
                          <div class="selected-webentities-container">
                            <table>
                              <tr
                                ng-repeat="id in checkedList"
                              >
                                <td class="webentity-name">
                                  {{webentitiesCheckStack[id].name}}
                                </td>
                                <td class="remove-button">
                                  <button
                                    class="btn btn-xs btn-link"
                                    ng-click="uncheck(id)"
                                  > 
                                    <span class="glyphicon glyphicon-remove"></span>
                                    REMOVE
                                  </button>
                                </td>
                              </tr>
                            </table>
                          </div>
                          <button
                            class="btn btn-default btn-link pull-right"
                            ng-click="uncheckAll()"
                          > 
                            <span class="glyphicon glyphicon-remove"></span>
                            REMOVE ALL
                          </button>

                        </div>

                        <div class="col-lg-7 col-sm-6">
                          <div class="actions-container">
                            <h3>Actions</h3>
                            
                            <div class="row no-gutter">
                              <div class="col-md-7">
                                <div class="big-bullet-number">1</div>
                                <select class="form-control" ng-model="$parent.$parent.selected_setStatus">
                                  <option value="none">set to...</option>
                                  <option value="IN">IN</option>
                                  <option value="OUT">OUT</option>
                                  <option value="UNDECIDED">UNDECIDED</option>
                                </select>
                              </div>
                              <div class="col-md-5">
                                <button
                                  class="btn btn-default"
                                  ng-disabled="selected_setStatus == 'none' || loading"
                                  ng-click="doSetStatus()"
                                >SET STATUS</button>
                              </div>
                            </div>

                            <div class="row no-gutter">
                              <div class="col-sm-12">
                                <div class="big-bullet-number">2</div>
                                <button
                                  class="btn btn-default"
                                  ng-class="{disabled: loading}"
                                  ng-click="doCrawl()"
                                >CHECK &amp; CRAWL</button>
                              </div>
                            </div>

                            <div class="row no-gutter">
                              <div class="col-md-7">
                                <div class="big-bullet-number">3</div>
                                <select class="form-control" ng-model="$parent.$parent.selected_mergeTarget">
                                  <option value="none">merge into...</option>
                                  <option
                                    ng-repeat="id in checkedList"
                                    value="{{id}}"
                                  >{{webentitiesCheckStack[id].name}}</option>
                                </td>
                                </select>
                              </div>
                              <div class="col-md-5">
                                <button
                                  class="btn btn-default"
                                  ng-disabled="selected_mergeTarget == 'none' || loading"
                                  ng-click="doMerge()"
                                >MERGE</button>
                              </div>
                            </div>

                          </div>
                        </div>

                      </div>
                    </div>
                    

                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
