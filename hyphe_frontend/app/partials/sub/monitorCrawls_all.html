<div ng-if="!listLoaded">
	<br>
	<p class="text-muted">
		Loading crawl jobs
	</p>
</div>
<div ng-if="listLoaded && lastCrawlJobs.length == 0">
	<br>
	<p class="text-info">
		No crawl job
	</p>
</div>

<table class="table table-condensed" ng-if="listLoaded && lastCrawlJobs.length > 0">
  <thead>
    <tr>
      <th>Web entity Name</th>
      <th>Depth</th>
      <th>Cautious</th>
      <th>Status</th>
      <th>Crawled / Discovered Pages</th>
      <th>Scheduled</th>
      <th>Duration</th>
    </tr>
  </thead>
  <tbody>

    <!-- Rows -->
    <tr
      ng-repeat="job in lastCrawlJobs|paginate:$parent.paginationPage:paginationLength track by $index"
      ng-click="displayDetails(job)"
      class="crawljob-row-content"
      ng-class="{
        'bg-danger':job.globalStatus == 'CRASHED'
        ,'bg-warning':job.globalStatus == 'UNSUCCESSFUL'
        ,'bg-blank':job.globalStatus == 'CANCELED'
        ,'bg-info':job.globalStatus == 'RETRIED'
        ,'bg-primary':job.globalStatus == 'CRAWLING' || job.globalStatus == 'INDEXING' || job.globalStatus == 'WAITING'
        ,'bg-success': job.globalStatus == 'ACHIEVED'}"
    >
      <td>{{webentityIndex[job.webentity_id].name}}</td>
      <td>{{job.crawl_arguments.maxdepth}}</td>
      <td>
        <div ng-if="job.crawl_arguments.phantom">
          <span class="glyphicon glyphicon-bell"></span> YES
        </div>
        <div ng-if="!job.crawl_arguments.phantom">
          No
        </div>
      </td>
      <td><span>{{job.globalStatus}}</span>
      </td>
      <td>{{job.nb_crawled_pages}} / {{job.nb_pages}}</td>
      <td><span tooltip="{{job.created_at|date}}">{{job.created_at|prettyDate}}</span></td>
      <td><div ng-if="job.finished_at - job.created_at > 0">{{(job.finished_at - job.created_at)|duration}}</div></td>
    </tr>

  </tbody>
</table>

<!-- Pagination  -->
<div class="text-center">
  <pagination total-items="lastCrawlJobs.length" ng-model="$parent.$parent.paginationPage" items-per-page="paginationLength" boundary-links="true" rotate="false" max-size="paginationNumPages" ng-if="lastCrawlJobs.length > paginationLength"></pagination>
</div>