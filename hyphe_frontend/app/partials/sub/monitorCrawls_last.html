<div ng-if="!listLoaded">
	<br>
	<p class="text-muted">
		Loading crawl jobs
	</p>
</div>

<div ng-if="lastCrawlJobs.length == 0">
	<br>
	<p class="text-info">
		No crawl job
	</p>
</div>

<div class="container-fluid" ng-if="listLoaded">
	<div class="row crawljob-cells-container">
	  <div
	    class="col-md-4 col-lg-3 crawljob-cell"
	    ng-repeat="job in lastCrawlJobs"
	  >
	    <div
	      class="crawljob-cell-content"
	      ng-class="{
	      	'bg-danger':job.crawling_status == 'CRASHED'
	      	,'bg-blank':job.crawling_status == 'CANCELED'
	      	,'bg-info':job.crawling_status == 'RETRIED'
	      	,'bg-primary':job.crawling_status == 'RUNNING' || (job.crawling_status == 'FINISHED' && (job.indexing_status == 'RUNNING' || job.indexing_status == 'BATCH_RUNNING' || job.indexing_status == 'BATCH_FINISHED' || job.indexing_status == 'PENDING'))
	      	,'bg-success': job.crawling_status == 'FINISHED' && job.indexing_status == 'FINISHED'}"
	    >
	      <p class="title">
	        {{webentityIndex[job.webentity_id].name || 'Web Entity Loading'}}
	      </p>
	      <p class="subtitle">
	        Scheduled <span tooltip="{{job.timestamp|date}}">{{job.timestamp|prettyDate}}</span>
	      </p>
				<div
					class="crawljob-animation"

					water-loader="{{job.crawling_status == 'RUNNING' ? 'CRAWLING' : job.crawling_status != 'FINISHED' ? job.crawling_status : job.indexing_status == 'FINISHED' ? 'ACHIEVED' : job.indexing_status == 'RUNNING' || job.indexing_status == 'BATCH_RUNNING' || job.indexing_status == 'BATCH_FINISHED' ? 'INDEXING' : job.indexing_status == 'PENDING' ? 'INDEX PENDING' : 'INDEXING ' + job.indexing_status}}"

					wl-message-only="{{job.crawling_status == 'PENDING' || job.crawling_status == 'CRASHED' || job.crawling_status == 'CANCELED' || job.crawling_status == 'RETRIED' || (job.crawling_status == 'FINISHED' && job.indexing_status == 'FINISHED')}}"

					wl-text-danger="job.crawling_status == 'CANCELED'"

					wl-cog="{{job.crawling_status == 'FINISHED' && (job.indexing_status == 'PENDING' || job.indexing_status == 'RUNNING' || job.indexing_status == 'BATCH_RUNNING' || job.indexing_status == 'BATCH_FINISHED' )}}"
				/>


    </div>
	  </div>
	</div>
</div>

<!-- 
<ul ng-if="listLoaded">
	<li ng-repeat="job in crawlJobs">
		<ul>
			<li>id: {{job._id}}</li>
			<li>
				crawl arguments (TODO)
			</li>
			<li>crawling_status: {{job.crawling_status}}</li>
			<li>indexing_status: {{job.indexing_status}}</li>
			<li>nb_crawled_pages: {{job.nb_crawled_pages}}</li>
			<li>nb_links: {{job.nb_links}}</li>
			<li>nb_pages: {{job.nb_pages}}</li>
			<li>timestamp: {{job.timestamp}}</li>
			<li>webentity_id: {{job.webentity_id}}</li>
		</ul>
	</li>
</ul>
 -->