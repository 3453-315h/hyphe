<div class="container-fluid fullheight">
  <div class="row no-gutter" ng-include="'partials/topbar_fixed.html'">
  </div>
  <div class="fullheight-side-panel" ng-include="'partials/sidebar.html'"></div>
  <div class="fullheight-main-panel">
    <div ng-if="loading">
      <spinner text="'LOADING NETWORK'"/>
    </div>
    <div
      class="sigma-parent"
      ng-if="!loading"
      ng-class="{pointable: overNode}"
    >
      <div class="sigma-expand" id="sigma"></div>
      <div class="sigma-tools">
        <div class="btn-group-vertical">
          <button 
            type="button"
            class="btn btn-primary btn-xs"
            ng-click="toggleSpatialization()"
            tooltip-placement="right"
            tooltip="{{spatializationRunning ? 'Stop layout' : 'Run layout'}}"
          >
            <span class="glyphicon glyphicon-play" ng-if="!spatializationRunning"></span>
            <span class="glyphicon glyphicon-pause" ng-if="spatializationRunning"></span>
          </button>
          <button
            type="button"
            class="btn btn-link btn-xs"
            ng-click="sigmaRecenter()"
            tooltip-placement="right"
            tooltip="Recenter"
          >
            <span class="glyphicon glyphicon-record"></span>
          </button>
          <button
            type="button"
            class="btn btn-link btn-xs"
            ng-click="sigmaZoom()"
            tooltip-placement="right"
            tooltip="Zoom"
          >
            <span class="glyphicon glyphicon-plus"></span>
          </button>
          <button
            type="button"
            class="btn btn-link btn-xs"
            ng-click="sigmaUnzoom()"
            tooltip-placement="right"
            tooltip="Dezoom"
          >
            <span class="glyphicon glyphicon-minus"></span>
          </button>
        </div>
      </div>
    </div>

    <div class="network-key" ng-if="!loading">
      <div class="floating-button">
        <button
          class="btn btn-default"
          ng-click="downloadNetwork()"
          ng-class="{disabled:loading}"
        >
          <span class="glyphicon glyphicon-download"></span>
          DOWNLOAD GEXF
        </button>
      </div>

      <div class="container-fluid hidden-xs">

        <div class="collapse-button pointable" ng-click="toggleKeyCollapse()" ng-class="{'above-line':keyCollapsed}">
          <span class="glyphicon" ng-class="{'glyphicon-chevron-up':keyCollapsed, 'glyphicon-chevron-down':!keyCollapsed}"></span>
        </div>

        <div class="row" collapse="keyCollapsed">
          <div class="col-sm-4">
            <h4>WEB ENTITY STATUS</h4>
            <p ng-if="settings.in">
              <span class="dot dot-in"></span>&nbsp;IN
            </p>
            <p ng-if="settings.undecided">
              <span class="dot dot-undecided"></span>&nbsp;UNDECIDED
            </p>
            <p ng-if="settings.discovered">
              <span class="dot dot-discovered"></span>&nbsp;DISCOVERED
              <span class="text-info" ng-if="settings.discoveredMinDegree>0"><br>Cited by {{settings.discoveredMinDegree}}+ entities only</span>
            </p>
            <p ng-if="settings.out">
              <span class="dot dot-out"></span>&nbsp;OUT
            </p>
            <br>
          </div>
          <div class="col-sm-4">
            <h4>SIZE</h4>
            <p>
              <span class="dot dot-small"></span>&nbsp;<span class="dot dot-medium"></span>&nbsp;<span class="dot dot-big"></span> DEGREE: Small web entities are linked to few others, big entities are linked with many others
            </p>
            <br>
          </div>
          <div class="col-sm-4">
            <h4>LINKS</h4>
            <p>
              <span class="line-link"></span> Hyperlink between entities
            </p>
            <br>
          </div>
        </div>
      </div>
    </div>

    <div class="sigma-floating hidden-xs">
      <div class="flatpanel">
        <div class="flatpanel-heading">
          <span class="pointable" ng-click="toggleFilterCollapse()">
            FILTERS
          </span>
          <span ng-show="!filterCollapsed">
            <span class="text-muted"> - </span>
            <span dropdown dropdown-append-to-body is-open="presetsOpen">
              <a href id="presets-dropdown" dropdown-toggle>
                presets
              </a>
              <ul class="dropdown-menu" aria-labelledby="presets-dropdown">
                <li ng-repeat="choice in presetNames">
                  <a href ng-click="applyPreset($index)">{{choice}}</a>
                </li>
              </ul>
            </span>
          </span>

          <span class="pull-right pointable" ng-click="toggleFilterCollapse()">
            &nbsp;&nbsp;
            <span class="glyphicon" ng-class="{'glyphicon-chevron-up':!filterCollapsed, 'glyphicon-chevron-down':filterCollapsed}"></span>
          </span>
        </div>
        <div class="flatpanel-body" collapse="filterCollapsed">
          
          <!-- <div class="flatpanel-textblock">
            

            <h5>Presets</h5>
            <div class="btn-group">
              <label
                class="btn btn-default btn-sm"
                ng-model="presets.corpus.status"
                ng-change="applyPreset('corpus')"
                ng-class="{disabled:loading}"
                btn-checkbox
              >CORPUS ONLY</label>

              <label
                class="btn btn-default btn-sm"
                ng-model="presets.prospection.status"
                ng-change="applyPreset('prospection')"
                ng-class="{disabled:loading}"
                btn-checkbox
              >PROSPECTION</label>

              <label
                class="btn btn-default btn-sm"
                ng-model="presets.full.status"
                ng-change="applyPreset('full')"
                ng-class="{disabled:loading}"
                btn-checkbox
              >FULL DATA</label>

            </div>
          </div> -->

          <div class="flatpanel-textblock flatpanel-separated">
            
            <div class="row">
              <div class="col-lg-12">
                <hyphe-status-box statuses="statuses" counts="counts" change="touchSettings()" disabled="loading"></hyphe-status-box>
                <br>
                <br>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-6">
                <label>Limit DISCOVERED</label>
                <br>
                <select class="form-control" ng-change="touchSettings()" ng-disabled="loading" ng-model="statuses.discoveredMinDegree">
                  <option value="0">Display every discovered</option>
                  <option ng-show="webentities.discovered_2.length" value="2">Cited by 2+ entities only ({{webentities.discovered_2.length}})</option>
                  <option ng-show="webentities.discovered_3.length" value="3">Cited by 3+ entities only ({{webentities.discovered_3.length}})</option>
                  <option ng-show="webentities.discovered_4.length" value="4">Cited by 4+ entities only ({{webentities.discovered_4.length}})</option>
                  <option ng-show="webentities.discovered_5.length" value="5">Cited by 5+ entities only ({{webentities.discovered_5.length}})</option>
                </select>
              </div>
              <div class="col-lg-6">
                <label>Isolated entities</label>
                <br>
                <div class="checkbox">
                  <label>
                    <input type="checkbox" ng-change="touchSettings()" ng-disabled="loading" ng-model="statuses.hideIsolated"> Hide
                  </label>
                </div>
              </div>
            </div>

          </div>

          <div class="flatpanel-textblock flatpanel-right flatpanel-separated" collapse="!settingsChanged">
            <button class="btn btn-default" ng-click="revertSettings()"><span class="glyphicon glyphicon-remove"></span> CANCEL</button>
            <button class="btn btn-primary" ng-click="applySettings()"><span class="glyphicon glyphicon-ok"></span> APPLY CHANGES</button>
          </div>

        </div>

      </div>
    </div>



  </div>
</div>
