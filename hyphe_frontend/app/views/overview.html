<div layout="column" layout-fill>
  <div class="topbar-height" ng-include="'partials/topbar.html'">
  </div>
  <div flex>
    <div layout="row" layout-fill>
      <div class="sidebar-width" ng-include="'partials/sidebar.html'"></div>
      <div flex md-colors="{background: 'default-background-50'}" style="overflow-y: auto;">
        
        <!-- Content -->
        <div ng-show="corpusStatus">

          <!-- Welcome message when empty -->
          <div ng-hide="corpusStatus.corpus.traph.webentities.total" class="page-header">
            <h1>
              Welcome to your Hyphe corpus!
            </h1>
            <p class="md-body-1">
              Start defining the first <span hyphe-glossary="web entities"></span> of your corpus by <a href="#/project/{{corpusId}}/importurls">importing urls</a> to <span hyphe-glossary="crawl"></span>.
            </p>
          </div>

          <!-- Header when corpus not empty -->
          <div class="page-header" ng-show="corpusStatus.corpus.traph.webentities.total">
            <h1>
              OVERVIEW
            </h1>
            <span class="md-subhead">
              Monitor the state of web entities and the activity on this corpus
            </span>
          </div>

          <!-- Information when corpus not empty -->
          <div ng-show="corpusStatus.corpus.traph.webentities.total" style="padding:8px">

            <!-- Blocks by status -->
            <div style="padding-right: 64px">
              <md-grid-list
                md-cols-xs="2"
                md-cols-sm="2"
                md-cols-gt-sm="4"
                md-row-height="1:1"
                md-gutter="8px"
              >

                <md-grid-tile md-rowspan="1" md-colspan="1">
                  <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-in':statuses.in, 'webentity-background-null': !statuses.in}" ng-click="statuses.in = !statuses.in">
                    <div class="md-title">
                      IN
                    </div>
                    <div class="md-headline">
                      {{corpusStatus.corpus.traph.webentities.IN|number}}
                    </div>
                  </div>
                </md-grid-tile>

                <md-grid-tile md-rowspan="1" md-colspan="1">
                  <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-undecided':statuses.undecided, 'webentity-background-null': !statuses.undecided}" ng-click="statuses.undecided = !statuses.undecided">
                    <div class="md-title">
                      UNDECIDED
                    </div>
                    <div class="md-headline">
                      {{corpusStatus.corpus.traph.webentities.UNDECIDED|number}}
                    </div>
                  </div>
                </md-grid-tile>

                <md-grid-tile md-rowspan="1" md-colspan="1">
                  <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-out':statuses.out, 'webentity-background-null': !statuses.out}" ng-click="statuses.out = !statuses.out">
                    <div class="md-title">
                      OUT
                    </div>
                    <div class="md-headline">
                      {{corpusStatus.corpus.traph.webentities.OUT|number}}
                    </div>
                  </div>
                </md-grid-tile>

                <md-grid-tile md-rowspan="1" md-colspan="1">
                  <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-discovered':statuses.discovered, 'webentity-background-null': !statuses.discovered}" ng-click="statuses.discovered = !statuses.discovered">
                    <div class="md-title">
                      DISCOVERED
                    </div>
                    <div class="md-headline">
                      {{corpusStatus.corpus.traph.webentities.DISCOVERED|number}}
                    </div>
                  </div>
                </md-grid-tile>

              </md-grid-list>
            </div>

            <!-- Activity charts -->
            <div layout="column">
              <div style="height: 360px; position: relative">
                <activity-chart
                  data="corpusStatistics"
                  statuses="statuses"
                  log-mode="statusLogMode"
                  layout-fill
                  layout="column"
                  layout-align="center center"
                  ng-if="displayStatistics"
                ></activity-chart>
                <div class="compact-chart-title-overlay" md-colors="{'background':'default-background-50-0.6'}" layout="column">
                  <div class="md-title">Web entities<br>volume<br>over time</div>
                  <md-switch ng-model="statusLogMode" aria-label="Log" style="margin:0px">
                    Log curves
                  </md-switch>
                </div>
              </div>

              <div style="height: 240px; position: relative">
                <activity-chart-2
                  data="corpusStatistics"
                  layout-fill
                  layout="column"
                  layout-align="center center"
                  ng-if="displayStatistics"
                ></activity-chart-2>
                <div class="compact-chart-title-overlay" md-colors="{'background':'default-background-50-0.6'}">
                  <div class="md-title">Uncrawled<br>and untagged<br>web entities</div>
                </div>
              </div>
            </div>

            <!-- Current activity -->
            <h3>Current activity</h3>
            <hyphe-current-activity status="status"></hyphe-current-activity>

            <!-- Crawl jobs -->
            <div layout="row">
              <h3>
                {{(
                  corpusStatus.corpus.crawler.jobs_running
                  + corpusStatus.corpus.crawler.jobs_pending
                  + corpusStatus.corpus.crawler.jobs_finished
                )|number}}
                Crawl jobs
              </h3>
              <div layout="row" style="padding-top: 38px; margin-left: 16px">
                <div md-colors="{'color':'default-primary'}" style="margin-right: 16px">
                  {{corpusStatus.corpus.crawler.jobs_running|number}} running
                </div>
                <div md-colors="{'color':'default-background-300'}" style="margin-right: 16px">
                  {{corpusStatus.corpus.crawler.jobs_pending|number}} pending
                </div>
                <div md-colors="{'color':'default-background-500'}">
                  {{corpusStatus.corpus.crawler.jobs_finished|number}} finished
                </div>
              </div>
            </div>
            <md-grid-list
              style="margin-bottom: 8px"
              md-cols="8"
              md-cols-sm="16"
              md-cols-md="24"
              md-cols-gt-md="36"
              md-gutter="4px"
              md-row-height="1:1"
            >
              <!-- Cubes -->
              <md-grid-tile
                class="visual-crawl-job-tile"
                ng-repeat="job in visualCrawlJobs"
                md-colors="{
                  'background':
                    (job.status == 'running')
                    ? ('default-primary-500')
                    : (
                      (job.status == 'finished')
                      ? ('default-background-200')
                      : ('default-background-100-0.5')
                    )
                }"
              >
                <md-tooltip md-direction="top">{{job.status}}</md-tooltip>
              </md-grid-tile>
            </md-grid-list>


            <!-- Info blocks -->
            <!-- <div layout="row">
              <md-content flex layout="column" layout-align="start center" style="padding:8px; margin-right:8px;" md-colors="{background: 'default-background-100'}">
                <h3>
                  CRAWL JOBS
                </h3>
                <p class="md-body-1" ng-show="true || corpusStatus.corpus.crawler.jobs_finished">
                  {{corpusStatus.corpus.crawler.jobs_finished}} achieved
                </p>
                <p class="md-body-1" ng-show="true || corpusStatus.corpus.crawler.jobs_running">
                  {{corpusStatus.corpus.crawler.jobs_running}} running
                </p>
                <p class="md-body-1" ng-show="true || corpusStatus.corpus.crawler.jobs_pending">
                  {{corpusStatus.corpus.crawler.jobs_pending}} pending
                </p>
                <p class="md-body-1">
                  Last indexation {{corpusStatus.corpus.traph.last_index|prettyDate}}
                <p class="md-body-1" ng-show="true || corpusStatus.corpus.traph.job_running">
                  Currently: {{corpusStatus.corpus.traph.job_running}}
                </p>
              </md-content>
              <md-content flex layout="column" layout-align="start center" style="padding:8px;" md-colors="{background: 'default-background-100'}">
                <h3>
                  CONTENT CRAWLED
                </h3>
                <p class="md-body-1" >
                  {{corpusStatus.corpus.crawler.pages_crawled|number|no}} page{{corpusStatus.corpus.crawler.pages_crawled|plural}} crawled
                </p>
                <p class="md-body-1" ng-if="true || corpusStatus.corpus.traph.pages_to_index" >
                  including {{corpusStatus.corpus.traph.pages_to_index|number}} unindexed yet
                </p>
                <p class="md-body-1" >
                  {{corpusStatus.corpus.crawler.pages_found|number|no}} page{{corpusStatus.corpus.crawler.pages_found|plural}} discovered
                </p>
                <p class="md-body-1" ng-show="true || corpusStatus.corpus.crawler.links_found" >
                  {{corpusStatus.corpus.crawler.links_found|number}} link{{corpusStatus.corpus.crawler.links_found|plural}} discovered
                </p>
              </md-content>
            </div> -->

          </div>

        </div>

      </div>
    </div>
  </div>
</div>