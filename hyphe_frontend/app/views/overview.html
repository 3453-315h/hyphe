<div layout="column" layout-fill>
  <div class="topbar-height" ng-include="'partials/topbar.html'">
  </div>
  <div flex>
    <div layout="row" layout-fill>
      <div class="sidebar-width" ng-include="'partials/sidebar.html'"></div>
      <div flex md-colors="{background: 'default-background-50'}" style="overflow-y: auto;">
        
        <!-- Content -->
        <div ng-show="corpusStatus">

          <!-- Welcome message when empty -->
          <div ng-hide="corpusStatus.corpus.traph.webentities.total" class="page-header">
            <h1>
              Welcome to your Hyphe corpus!
            </h1>
            <p class="md-body-1">
              Start defining the first <span hyphe-glossary="web entities"></span> of your corpus by <a href="#/project/{{corpusId}}/importurls">importing urls</a> to <span hyphe-glossary="crawl"></span>.
            </p>
          </div>

          <!-- Header when corpus not empty -->
          <div class="page-header" ng-show="corpusStatus.corpus.traph.webentities.total">
            <h1>
              OVERVIEW
            </h1>
          </div>

          <!-- Information when corpus not empty -->
          <div ng-show="corpusStatus.corpus.traph.webentities.total" style="padding:8px">

            <!-- Blocks by status -->
            <md-grid-list
              md-cols-xs="2"
              md-cols-sm="2"
              md-cols-gt-sm="4"
              md-row-height="1:1"
              md-gutter="8px">

              <md-grid-tile md-rowspan="1" md-colspan="1">
                <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-in':statuses.in, 'webentity-background-null': !statuses.in}" ng-click="statuses.in = !statuses.in">
                  <div class="md-title">
                    IN
                  </div>
                  <div class="md-body-1">
                    {{corpusStatus.corpus.traph.webentities.IN|none}}
                  </div>
                </div>
              </md-grid-tile>

              <md-grid-tile md-rowspan="1" md-colspan="1">
                <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-undecided':statuses.undecided, 'webentity-background-null': !statuses.undecided}" ng-click="statuses.undecided = !statuses.undecided">
                  <div class="md-title">
                    UNDECIDED
                  </div>
                  <div class="md-body-1">
                    {{corpusStatus.corpus.traph.webentities.UNDECIDED|none}}
                  </div>
                </div>
              </md-grid-tile>

              <md-grid-tile md-rowspan="1" md-colspan="1">
                <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-out':statuses.out, 'webentity-background-null': !statuses.out}" ng-click="statuses.out = !statuses.out">
                  <div class="md-title">
                    OUT
                  </div>
                  <div class="md-body-1">
                    {{corpusStatus.corpus.traph.webentities.OUT|none}}
                  </div>
                </div>
              </md-grid-tile>

              <md-grid-tile md-rowspan="1" md-colspan="1">
                <div layout-fill layout="column" layout-align="center center" class="pointable" ng-class="{'webentity-background-discovered':statuses.discovered, 'webentity-background-null': !statuses.discovered}" ng-click="statuses.discovered = !statuses.discovered">
                  <div class="md-title">
                    DISCOVERED
                  </div>
                  <div class="md-body-1">
                    {{corpusStatus.corpus.traph.webentities.DISCOVERED|none}}
                  </div>
                </div>
              </md-grid-tile>

            </md-grid-list>

            <!-- Activity chart -->
            <div layout="column">
              <div style="height: 300px; margin: 8px 0px 8px 0px; position: relative">
                <activity-chart
                  data="corpusStatistics"
                  layout-fill
                  layout="column"
                  layout-align="center center"
                  ng-if="displayStatistics"
                  statuses="statuses"
                ></activity-chart>
                <div style="position: absolute; top:0; left: 0;">
                  <div class="md-title">Web entities volume<br>over time</div>
                </div>
              </div>
            </div>

            <!-- Info blocks -->
            <div layout="row">
              <md-content flex layout="column" layout-align="start center" style="padding:8px; margin-right:8px;" md-colors="{background: 'default-background-100'}">
                <h3>
                  CRAWL JOBS
                </h3>
                <p class="md-body-1" ng-show="corpusStatus.corpus.crawler.jobs_finished">
                  {{corpusStatus.corpus.crawler.jobs_finished}} achieved
                </p>
                <p class="md-body-1" ng-show="corpusStatus.corpus.crawler.jobs_running">
                  {{corpusStatus.corpus.crawler.jobs_running}} running
                </p>
                <p class="md-body-1" ng-show="corpusStatus.corpus.crawler.jobs_pending">
                  {{corpusStatus.corpus.crawler.jobs_pending}} pending
                </p>
                <p class="md-body-1">
                  Last indexation {{corpusStatus.corpus.traph.last_index|prettyDate}}
                <p class="md-body-1" ng-show="corpusStatus.corpus.traph.job_running">
                  Currently: {{corpusStatus.corpus.traph.job_running}}
                </p>
              </md-content>
              <md-content flex layout="column" layout-align="start center" style="padding:8px;" md-colors="{background: 'default-background-100'}">
                <h3>
                  CONTENT CRAWLED
                </h3>
                <p class="md-body-1" >
                  {{corpusStatus.corpus.crawler.pages_crawled|no}} page{{corpusStatus.corpus.crawler.pages_crawled|plural}} crawled
                </p>
                <p class="md-body-1" ng-if="corpusStatus.corpus.traph.pages_to_index" >
                  including {{corpusStatus.corpus.traph.pages_to_index}} unindexed yet
                </p>
                <p class="md-body-1" >
                  {{corpusStatus.corpus.crawler.pages_found|no}} page{{corpusStatus.corpus.crawler.pages_found|plural}} discovered
                </p>
                <p class="md-body-1" ng-show="corpusStatus.corpus.crawler.links_found" >
                  {{corpusStatus.corpus.crawler.links_found}} link{{corpusStatus.corpus.crawler.links_found|plural}} discovered
                </p>
              </md-content>
            </div>

          </div>

        </div>

      </div>
    </div>
  </div>
</div>